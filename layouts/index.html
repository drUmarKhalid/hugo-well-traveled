{{ partial "header.html" . }}

<main>
    {{ range (.Paginate (.Data.Pages.GroupBy "Section") 3).PageGroups }}
    <section class="section" id="section-{{ .Key }}" style="background-image: url(img/{{ .Key }}/header.jpg);">
        <h2 class="section__name"><a href="{{ .Key | absURL }}">{{ humanize .Key }}</a></h2>

        <div class="section__entries">
            {{ range .Pages }}
            <article class="section__entry entry">
                <h3 class="entry__title"><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <time class="entry__timestamp" datetime="{{ .Date }}">{{ .Date.Format "January 2, 2006 15:04 MST" }}</time>

                <div class="entry__summary text">
                    {{ .Summary | plainify | safeHTML }}
                </div>
            </article>
            {{ end }}
            {{ if $.Paginator.HasNext }}
            <div class="section__link">
                <a href="{{ .Key | absURL }}">See all {{ $.Paginator.TotalNumberOfElements }} stories from {{ humanize .Key }}</a>
            </div>
            {{ end }}
        </div>
    </section>
    {{ end }}
</main>

{{ partial "footer.html" . }}
